"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_thirdweb_dist_esm_extensions_erc20_write_getApprovalForTransaction_js"],{

/***/ "./node_modules/thirdweb/dist/esm/extensions/erc20/write/getApprovalForTransaction.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/thirdweb/dist/esm/extensions/erc20/write/getApprovalForTransaction.js ***!
  \********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getApprovalForTransaction: function() { return /* binding */ getApprovalForTransaction; }\n/* harmony export */ });\n/* harmony import */ var _contract_contract_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../contract/contract.js */ \"./node_modules/thirdweb/dist/esm/contract/contract.js\");\n/* harmony import */ var _utils_address_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/address.js */ \"./node_modules/thirdweb/dist/esm/utils/address.js\");\n/* harmony import */ var _utils_promise_resolve_promised_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/promise/resolve-promised-value.js */ \"./node_modules/thirdweb/dist/esm/utils/promise/resolve-promised-value.js\");\n/* harmony import */ var _generated_IERC20_read_allowance_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../__generated__/IERC20/read/allowance.js */ \"./node_modules/thirdweb/dist/esm/extensions/erc20/__generated__/IERC20/read/allowance.js\");\n/* harmony import */ var _generated_IERC20_write_approve_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../__generated__/IERC20/write/approve.js */ \"./node_modules/thirdweb/dist/esm/extensions/erc20/__generated__/IERC20/write/approve.js\");\n\n\n\n\n\n/**\n * When dealing with transactions that involve ERC20 tokens (Airdropping ERC20, buy NFTs with ERC20, etc.)\n * you often have to do a pre-check to see if the targeted contract has the sufficient allowance to \"take\" the ERC20 tokens from the caller's wallet.\n *\n * This extension is a handy method that checks for the allowance and requests to approve for more if current allowance is insufficient\n *\n * @param options GetApprovalForTransactionParams\n * @returns a PreparedTransaction\n *\n * @example\n * ```ts\n * import { getApprovalForTransaction } from \"thirdweb/extensions/erc20\";\n * import { sendAndConfirmTransaction } from \"thirdweb\";\n *\n * async function buyNFT() {\n *   const buyTransaction = ... // could be a marketplacev3's buyFromListing\n *\n *   // Check if you need to approve spending for the involved ERC20 contract\n *   const approveTx = await getApprovalForTransaction({\n *     transaction: buyTransaction,\n *     account, // the connected account\n *   });\n *   if (approveTx) {\n *     await sendAndConfirmTransaction({\n *       transaction: approveTx,\n *       account,\n *     })\n *   }\n *   // Once approved, you can finally perform the buy transaction\n *   await sendAndConfirmTransaction({\n *     transaction: buyTransaction,\n *     account,\n *   });\n * }\n * ```\n *\n * @transaction\n */\nasync function getApprovalForTransaction(options) {\n    const { transaction, account } = options;\n    if (!account) {\n        return null;\n    }\n    const erc20Value = await (0,_utils_promise_resolve_promised_value_js__WEBPACK_IMPORTED_MODULE_0__.resolvePromisedValue)(transaction.erc20Value);\n    if (erc20Value) {\n        const target = await (0,_utils_promise_resolve_promised_value_js__WEBPACK_IMPORTED_MODULE_0__.resolvePromisedValue)(transaction.to);\n        if (!target ||\n            !erc20Value.tokenAddress ||\n            (0,_utils_address_js__WEBPACK_IMPORTED_MODULE_1__.getAddress)(target) === (0,_utils_address_js__WEBPACK_IMPORTED_MODULE_1__.getAddress)(erc20Value.tokenAddress)) {\n            return null;\n        }\n        const contract = (0,_contract_contract_js__WEBPACK_IMPORTED_MODULE_2__.getContract)({\n            address: erc20Value.tokenAddress,\n            chain: transaction.chain,\n            client: transaction.client,\n        });\n        const approvedValue = await (0,_generated_IERC20_read_allowance_js__WEBPACK_IMPORTED_MODULE_3__.allowance)({\n            contract,\n            owner: account.address,\n            spender: target,\n        });\n        if (approvedValue > erc20Value.amountWei) {\n            return null;\n        }\n        return (0,_generated_IERC20_write_approve_js__WEBPACK_IMPORTED_MODULE_4__.approve)({\n            contract,\n            value: erc20Value.amountWei,\n            spender: target,\n        });\n    }\n    return null;\n}\n//# sourceMappingURL=getApprovalForTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGhpcmR3ZWIvZGlzdC9lc20vZXh0ZW5zaW9ucy9lcmMyMC93cml0ZS9nZXRBcHByb3ZhbEZvclRyYW5zYWN0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0RDtBQUNMO0FBQ2lDO0FBQ2xCO0FBQ0g7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNEJBQTRCO0FBQ3hDLFlBQVksNEJBQTRCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOEZBQW9CO0FBQ2pEO0FBQ0EsNkJBQTZCLDhGQUFvQjtBQUNqRDtBQUNBO0FBQ0EsWUFBWSw2REFBVSxhQUFhLDZEQUFVO0FBQzdDO0FBQ0E7QUFDQSx5QkFBeUIsa0VBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULG9DQUFvQyw4RUFBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyRUFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RoaXJkd2ViL2Rpc3QvZXNtL2V4dGVuc2lvbnMvZXJjMjAvd3JpdGUvZ2V0QXBwcm92YWxGb3JUcmFuc2FjdGlvbi5qcz9kZGI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbnRyYWN0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbnRyYWN0L2NvbnRyYWN0LmpzXCI7XG5pbXBvcnQgeyBnZXRBZGRyZXNzIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2FkZHJlc3MuanNcIjtcbmltcG9ydCB7IHJlc29sdmVQcm9taXNlZFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3Byb21pc2UvcmVzb2x2ZS1wcm9taXNlZC12YWx1ZS5qc1wiO1xuaW1wb3J0IHsgYWxsb3dhbmNlIH0gZnJvbSBcIi4uL19fZ2VuZXJhdGVkX18vSUVSQzIwL3JlYWQvYWxsb3dhbmNlLmpzXCI7XG5pbXBvcnQgeyBhcHByb3ZlIH0gZnJvbSBcIi4uL19fZ2VuZXJhdGVkX18vSUVSQzIwL3dyaXRlL2FwcHJvdmUuanNcIjtcbi8qKlxuICogV2hlbiBkZWFsaW5nIHdpdGggdHJhbnNhY3Rpb25zIHRoYXQgaW52b2x2ZSBFUkMyMCB0b2tlbnMgKEFpcmRyb3BwaW5nIEVSQzIwLCBidXkgTkZUcyB3aXRoIEVSQzIwLCBldGMuKVxuICogeW91IG9mdGVuIGhhdmUgdG8gZG8gYSBwcmUtY2hlY2sgdG8gc2VlIGlmIHRoZSB0YXJnZXRlZCBjb250cmFjdCBoYXMgdGhlIHN1ZmZpY2llbnQgYWxsb3dhbmNlIHRvIFwidGFrZVwiIHRoZSBFUkMyMCB0b2tlbnMgZnJvbSB0aGUgY2FsbGVyJ3Mgd2FsbGV0LlxuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGEgaGFuZHkgbWV0aG9kIHRoYXQgY2hlY2tzIGZvciB0aGUgYWxsb3dhbmNlIGFuZCByZXF1ZXN0cyB0byBhcHByb3ZlIGZvciBtb3JlIGlmIGN1cnJlbnQgYWxsb3dhbmNlIGlzIGluc3VmZmljaWVudFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEdldEFwcHJvdmFsRm9yVHJhbnNhY3Rpb25QYXJhbXNcbiAqIEByZXR1cm5zIGEgUHJlcGFyZWRUcmFuc2FjdGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ2V0QXBwcm92YWxGb3JUcmFuc2FjdGlvbiB9IGZyb20gXCJ0aGlyZHdlYi9leHRlbnNpb25zL2VyYzIwXCI7XG4gKiBpbXBvcnQgeyBzZW5kQW5kQ29uZmlybVRyYW5zYWN0aW9uIH0gZnJvbSBcInRoaXJkd2ViXCI7XG4gKlxuICogYXN5bmMgZnVuY3Rpb24gYnV5TkZUKCkge1xuICogICBjb25zdCBidXlUcmFuc2FjdGlvbiA9IC4uLiAvLyBjb3VsZCBiZSBhIG1hcmtldHBsYWNldjMncyBidXlGcm9tTGlzdGluZ1xuICpcbiAqICAgLy8gQ2hlY2sgaWYgeW91IG5lZWQgdG8gYXBwcm92ZSBzcGVuZGluZyBmb3IgdGhlIGludm9sdmVkIEVSQzIwIGNvbnRyYWN0XG4gKiAgIGNvbnN0IGFwcHJvdmVUeCA9IGF3YWl0IGdldEFwcHJvdmFsRm9yVHJhbnNhY3Rpb24oe1xuICogICAgIHRyYW5zYWN0aW9uOiBidXlUcmFuc2FjdGlvbixcbiAqICAgICBhY2NvdW50LCAvLyB0aGUgY29ubmVjdGVkIGFjY291bnRcbiAqICAgfSk7XG4gKiAgIGlmIChhcHByb3ZlVHgpIHtcbiAqICAgICBhd2FpdCBzZW5kQW5kQ29uZmlybVRyYW5zYWN0aW9uKHtcbiAqICAgICAgIHRyYW5zYWN0aW9uOiBhcHByb3ZlVHgsXG4gKiAgICAgICBhY2NvdW50LFxuICogICAgIH0pXG4gKiAgIH1cbiAqICAgLy8gT25jZSBhcHByb3ZlZCwgeW91IGNhbiBmaW5hbGx5IHBlcmZvcm0gdGhlIGJ1eSB0cmFuc2FjdGlvblxuICogICBhd2FpdCBzZW5kQW5kQ29uZmlybVRyYW5zYWN0aW9uKHtcbiAqICAgICB0cmFuc2FjdGlvbjogYnV5VHJhbnNhY3Rpb24sXG4gKiAgICAgYWNjb3VudCxcbiAqICAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAdHJhbnNhY3Rpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFwcHJvdmFsRm9yVHJhbnNhY3Rpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgdHJhbnNhY3Rpb24sIGFjY291bnQgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBlcmMyMFZhbHVlID0gYXdhaXQgcmVzb2x2ZVByb21pc2VkVmFsdWUodHJhbnNhY3Rpb24uZXJjMjBWYWx1ZSk7XG4gICAgaWYgKGVyYzIwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYXdhaXQgcmVzb2x2ZVByb21pc2VkVmFsdWUodHJhbnNhY3Rpb24udG8pO1xuICAgICAgICBpZiAoIXRhcmdldCB8fFxuICAgICAgICAgICAgIWVyYzIwVmFsdWUudG9rZW5BZGRyZXNzIHx8XG4gICAgICAgICAgICBnZXRBZGRyZXNzKHRhcmdldCkgPT09IGdldEFkZHJlc3MoZXJjMjBWYWx1ZS50b2tlbkFkZHJlc3MpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250cmFjdCA9IGdldENvbnRyYWN0KHtcbiAgICAgICAgICAgIGFkZHJlc3M6IGVyYzIwVmFsdWUudG9rZW5BZGRyZXNzLFxuICAgICAgICAgICAgY2hhaW46IHRyYW5zYWN0aW9uLmNoYWluLFxuICAgICAgICAgICAgY2xpZW50OiB0cmFuc2FjdGlvbi5jbGllbnQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcHByb3ZlZFZhbHVlID0gYXdhaXQgYWxsb3dhbmNlKHtcbiAgICAgICAgICAgIGNvbnRyYWN0LFxuICAgICAgICAgICAgb3duZXI6IGFjY291bnQuYWRkcmVzcyxcbiAgICAgICAgICAgIHNwZW5kZXI6IHRhcmdldCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhcHByb3ZlZFZhbHVlID4gZXJjMjBWYWx1ZS5hbW91bnRXZWkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHByb3ZlKHtcbiAgICAgICAgICAgIGNvbnRyYWN0LFxuICAgICAgICAgICAgdmFsdWU6IGVyYzIwVmFsdWUuYW1vdW50V2VpLFxuICAgICAgICAgICAgc3BlbmRlcjogdGFyZ2V0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRBcHByb3ZhbEZvclRyYW5zYWN0aW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/thirdweb/dist/esm/extensions/erc20/write/getApprovalForTransaction.js\n"));

/***/ })

}]);